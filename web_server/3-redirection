#!/bin/bash
# 3-redirection - Configures Nginx to redirect /redirect_me

# Update package list and install Nginx if not already installed
sudo apt-get update
sudo apt-get install -y nginx

# Create Nginx configuration for the redirect
sudo bash -c 'cat > /etc/nginx/sites-available/redirect <<EOF
server {
    listen 80;
        server_name _;

	    location /redirect_me {
	            return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;
		        }

		    location / {
		            try_files \$uri \$uri/ =404;
			        }
		}
	EOF'

	# Enable the configuration by creating a symbolic link
	sudo ln -sf /etc/nginx/sites-available/redirect /etc/nginx/sites-enabled/

	# Remove default Nginx configuration if it exists
	sudo rm -f /etc/nginx/sites-enabled/default

	# Test Nginx configuration and restart
	sudo nginx -t && sudo systemctl restart nginx
